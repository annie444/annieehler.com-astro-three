import{r as o}from"./index.6otl1p8d.js";class r{class;element;observer;classAddedCallback;classRemovedCallback;lastClassState=!1;constructor(e,s,a,l,t=null){this.element=e,this.class=s,this.classAddedCallback=a,this.classRemovedCallback=l,t===null?this.lastClassState=this.element.classList.contains(this.class):typeof t=="boolean"?this.lastClassState=t:typeof t=="function"&&(this.lastClassState=t()),this.init()}init(){this.observer=new MutationObserver(this.mutationCallback),this.observe()}observe(){this.observer.observe(this.element,{attributes:!0,attributeFilter:["class"]})}mutationCallback=e=>{for(const s of e)if(s.type==="attributes"&&s.attributeName==="class"&&s.target instanceof HTMLElement){let a=s.target.classList.contains(this.class);this.lastClassState!==a&&(this.lastClassState=a,a?this.classAddedCallback():this.classRemovedCallback())}};disconnect(){this.observer.disconnect()}}function i(){const[c,e]=o.useState();return o.useEffect(()=>{const s=()=>{const l=document.documentElement.classList.contains("dark"),t=window.matchMedia("(prefers-color-scheme: dark)");return console.log(`Media state: ${t.matches}`),console.log(`Dark class state: ${l}`),t.matches||l};e(s());const a=new r(document.documentElement,"dark",()=>{e(!0)},()=>{e(!1)},s);return()=>{a.disconnect()}},[]),c}export{i as u};
